<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>15-Gear Annual System</title>
<style>
  :root {
    --bg: #0b1120;
    --panel: #020617;
    --accent: #38bdf8;
    --accent-soft: #0ea5e9;
    --text: #e5e7eb;
    --muted: #64748b;
  }

  * {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    padding: 16px;
    background: radial-gradient(circle at top, #1e293b 0, #020617 55%, #000 100%);
    color: var(--text);
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  }

  h1 {
    text-align: center;
    margin: 0 0 8px;
    color: var(--accent);
    letter-spacing: 0.05em;
    font-size: clamp(20px, 3vw, 26px);
  }

  .subtitle {
    text-align: center;
    margin-bottom: 16px;
    font-size: 13px;
    color: var(--muted);
  }

  .gear-shell {
    max-width: 980px;
    margin: 0 auto;
    background: radial-gradient(circle at top left, #020617, #020617 40%, #000 100%);
    border-radius: 16px;
    padding: 16px 12px 18px;
    box-shadow:
      0 0 0 1px rgba(148, 163, 184, 0.15),
      0 18px 45px rgba(15, 23, 42, 0.9);
  }

  .gear-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 18px;
  }

  .gear {
    width: 72px;
    height: 72px;
    position: relative;
  }

  .gear svg {
    width: 100%;
    height: 100%;
    transform-origin: 50% 50%;
    transition: transform 0s linear;
    filter:
      drop-shadow(0 0 4px rgba(56, 189, 248, 0.55))
      drop-shadow(0 0 14px rgba(56, 189, 248, 0.28));
  }

  .gear:nth-child(3n + 1) svg path {
    fill: #0ea5e9;
    stroke: #38bdf8;
  }
  .gear:nth-child(3n + 2) svg path {
    fill: #22c55e;
    stroke: #4ade80;
  }
  .gear:nth-child(3n + 3) svg path {
    fill: #f97316;
    stroke: #fdba74;
  }

  .counter {
    position: absolute;
    bottom: -18px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 11px;
    color: var(--muted);
    white-space: nowrap;
    text-shadow: 0 1px 1px #000;
  }

  .info-panel {
    margin-top: 16px;
    padding: 10px 12px;
    border-radius: 10px;
    background: linear-gradient(to right, rgba(15, 23, 42, 0.95), rgba(8, 47, 73, 0.9));
    border: 1px solid rgba(56, 189, 248, 0.2);
    display: flex;
    flex-wrap: wrap;
    gap: 8px 18px;
    justify-content: center;
    font-size: 12px;
  }

  .info-item {
    color: var(--muted);
  }

  .info-label {
    color: var(--accent-soft);
    font-weight: 600;
    margin-right: 4px;
  }

  @media (max-width: 600px) {
    .gear-shell {
      padding-inline: 8px;
    }
    .gear {
      width: 60px;
      height: 60px;
    }
    .counter {
      font-size: 10px;
    }
  }
</style>
</head>
<body>
  <h1>15‑Gear Annual System</h1>
  <p class="subtitle">G1–G10 move visibly. G11–G15 progress from hours to days to year.</p>

  <div class="gear-shell">
    <div class="gear-container">
      <!-- data-speed = seconds for 1 full rotation -->
      <!-- data-direction = cw (clockwise) or ccw (counter‑clockwise) -->
      <!-- data-name only affects the label text -->

      <div class="gear" data-speed="4" data-direction="cw"  data-name="G1"></div>
      <div class="gear" data-speed="8" data-direction="ccw" data-name="G2"></div>
      <div class="gear" data-speed="16" data-direction="cw"  data-name="G3"></div>
      <div class="gear" data-speed="32" data-direction="ccw" data-name="G4"></div>
      <div class="gear" data-speed="64" data-direction="cw"  data-name="G5"></div>

      <div class="gear" data-speed="128" data-direction="ccw" data-name="G6"></div>
      <div class="gear" data-speed="256" data-direction="cw"  data-name="G7"></div>
      <div class="gear" data-speed="512" data-direction="ccw" data-name="G8"></div>
      <div class="gear" data-speed="1024" data-direction="cw"  data-name="G9"></div>
      <div class="gear" data-speed="2048" data-direction="ccw" data-name="G10"></div>

      <div class="gear" data-speed="7200" data-direction="cw"  data-name="G11"></div>
      <div class="gear" data-speed="21600" data-direction="ccw" data-name="G12"></div>
      <div class="gear" data-speed="86400" data-direction="cw"  data-name="G13"></div>
      <div class="gear" data-speed="604800" data-direction="ccw" data-name="G14"></div>
      <div class="gear" data-speed="31536000" data-direction="cw" data-name="G15"></div>
    </div>

    <div class="info-panel">
      <div class="info-item">
        <span class="info-label">System uptime:</span>
        <span id="uptime">0s</span>
      </div>
      <div class="info-item">
        <span class="info-label">Last updated:</span>
        <span id="last-updated">–</span>
      </div>
      <div class="info-item">
        <span class="info-label">Note:</span>
        Uses saved start‑time in localStorage to simulate continuous running like a clock.
      </div>
    </div>
  </div>

<script>
(function () {
  const STORAGE_KEY = 'fifteenGearSystemStart_v1';

  const gearSVGPath = `
    <svg viewBox="0 0 100 100">
      <path d="M50 10 L55 15 L60 10 L65 15 L70 10 L75 15 L80 20 L85 25 L90 30 L95 35
               L100 40 L95 45 L100 50 L95 55 L100 60 L95 65 L90 70 L85 75 L80 80 L75 85
               L70 90 L65 95 L60 100 L55 95 L50 100 L45 95 L40 100 L35 95 L30 90 L25 85
               L20 80 L15 75 L10 70 L5 65 L0 60 L5 55 L0 50 L5 45 L0 40 L5 35 L10 30
               L15 25 L20 20 L25 15 L30 10 L35 15 L40 10 L45 15 Z
               M50 30 A20 20 0 1 1 50 70 A20 20 0 1 1 50 30 Z"
            fill="#38bdf8" stroke="#7dd3fc" stroke-width="1"/>
    </svg>
  `;

  function getSystemStartTime() {
    try {
      const saved = localStorage.getItem(STORAGE_KEY);
      if (saved) {
        return parseInt(saved, 10);
      }
      const now = Date.now();
      localStorage.setItem(STORAGE_KEY, String(now));
      return now;
    } catch (e) {
      // If localStorage is blocked, just fall back to "this session".
      return Date.now();
    }
  }

  const systemStartTime = getSystemStartTime();

  const gearEls = Array.from(document.querySelectorAll('.gear')).map((el, index) => {
    // Inject SVG + counter into each gear
    el.innerHTML = gearSVGPath + '<div class="counter"></div>';
    const svg = el.querySelector('svg');
    const counterEl = el.querySelector('.counter');

    const speed = parseFloat(el.dataset.speed) || 10; // seconds per rotation
    const direction = el.dataset.direction === 'ccw' ? 'ccw' : 'cw';
    const name = el.dataset.name || 'G' + (index + 1);

    return { el, svg, counterEl, speed, direction, name };
  });

  const uptimeEl = document.getElementById('uptime');
  const lastUpdatedEl = document.getElementById('last-updated');

  function formatElapsed(seconds) {
    const s = Math.floor(seconds);
    const h = Math.floor(s / 3600);
    const m = Math.floor((s % 3600) / 60);
    const rem = s % 60;
    if (h > 0) return `${h}h ${m}m ${rem}s`;
    if (m > 0) return `${m}m ${rem}s`;
    return `${rem}s`;
  }

  function tick() {
    const now = Date.now();
    const elapsedSeconds = (now - systemStartTime) / 1000;

    gearEls.forEach(g => {
      const rotations = elapsedSeconds / g.speed;
      const angle = rotations * 360 * (g.direction === 'ccw' ? -1 : 1);
      g.svg.style.transform = `rotate(${angle}deg)`;
      g.counterEl.textContent = `${g.name}: ${rotations.toFixed(3)} rot`;
    });

    uptimeEl.textContent = formatElapsed(elapsedSeconds);
    lastUpdatedEl.textContent = new Date().toLocaleTimeString();

    requestAnimationFrame(tick);
  }

  requestAnimationFrame(tick);
})();
</script>
</body>
</html>
